{% extends "base.html" %}

{% block page_title %}
    Home
{% endblock %}

{% block content %}
     <form method="get" action="{% url 'posts:search' %}">
        <input value="{{ title }}" name="title" placeholder="Search by title!"/>
    </form>
    {% for post in posts %}
        <h3>
            <a href="{% url "posts:detail" post.pk %}">
                {{ post.title }}
            </a>
            글쓴이 {{ post.user }}
            추천 {{ post.like_sum }}
            댓글 {{ post.comments.count }}
            {%  if post.like_sum >= 10 %}
                WOW!
            {% elif post.like_sum <= -10 %}
                So Sad...
            {% else %}
                NORMAL!
            {%  endif %}

            {% if post in request.user.like_posts.all %}
                내가 추천한 글!
            {% endif %}
            {% if post.user == request.user %}
                내가 쓴 글!
            {% endif %}
            {%  if today|date:"ymd" == post.created|date:"ymd"  %}
                NEW!!
            {% endif %}
        </h3>
    {% endfor %}

    <h5>
        {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}">Previous</a>
        {% endif %}
        Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">Next</a>
        {% endif %}
    </h5>
{% endblock content %}

